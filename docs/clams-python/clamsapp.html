<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html"><link rel="search" title="Search" href="search.html">

    <!-- Generated with Sphinx 7.4.7 and Furo 2025.09.25 -->
        <title>Using CLAMS App - clams-python documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  --color-brand-primary: #008AFF;
  --color-brand-content: #0085A1;
  --color-link: #008AFF;
  --color-link-hover: #0085A1;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
<!-- CLAMS Hub Version Header - Injected -->
<style>
.clams-version-header {
    background: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
    padding: 8px 16px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
}
@media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) .clams-version-header {
        background: #1a1a1a;
        border-bottom-color: #333;
    }
    body:not([data-theme="light"]) .clams-version-header a {
        color: #6cb6ff;
    }
    body:not([data-theme="light"]) .clams-version-header .nav-link.active {
        background: #333;
    }
}
body[data-theme="dark"] .clams-version-header {
    background: #1a1a1a;
    border-bottom-color: #333;
}
body[data-theme="dark"] .clams-version-header a {
    color: #6cb6ff;
}
body[data-theme="dark"] .clams-version-header .nav-link.active {
    background: #333;
}
.clams-version-header a {
    color: #008AFF;
    text-decoration: none;
}
.clams-version-header a:hover {
    text-decoration: underline;
}
.clams-version-header .header-left {
    display: flex;
    align-items: center;
    gap: 16px;
}
.clams-version-header .logo {
    height: 28px;
    width: auto;
}
.clams-version-header .project-nav {
    display: flex;
    align-items: center;
    gap: 4px;
}
.clams-version-header .nav-link {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 13px;
}
.clams-version-header .nav-link:hover {
    background: #e9ecef;
    text-decoration: none;
}
.clams-version-header .nav-link.active {
    background: #e9ecef;
    font-weight: 600;
}
</style>
<div class="clams-version-header">
    <div class="header-left">
        <a href="https://clams.ai/" title="CLAMS Documentation Hub">
            <img src="https://clams.ai/home/_static/clams-logo.png" alt="CLAMS" class="logo">
        </a>
        <nav class="project-nav">
            <a href="https://clams.ai/home/" class="nav-link">home</a>
            <a href="https://clams.ai/mmif-python/" class="nav-link">mmif-python</a>
            <a href="https://clams.ai/clams-python/" class="nav-link active">clams-python</a>
        </nav>
    </div>
</div>
<!-- End CLAMS Hub Version Header -->

    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">clams-python  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">clams-python  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="input-output.html">I/O Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime-params.html">Runtime Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-apps.html">GPU Memory Management for CLAMS Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="appmetadata.html">CLAMS App Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="appdirectory.html">CLAMS App Directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html"><code class="docutils literal notranslate"><span class="pre">clams</span></code> shell command</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial: Wrapping an NLP Application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API documentation:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="modules.html">clams package</a><input aria-label="Toggle navigation of clams package" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="autodoc/clams.app.html">clams.app package</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodoc/clams.appmetadata.html">clams.appmetadata package</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodoc/clams.restify.html">clams.restify package</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodoc/clams.mmif_utils.html">clams.mmif_utils package</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/clamsproject/clams-python/blob/main/documentation/clamsapp.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/clamsproject/clams-python/edit/main/documentation/clamsapp.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="using-clams-app">
<h1>Using CLAMS App<a class="headerlink" href="#using-clams-app" title="Link to this heading">¶</a></h1>
<p>This document provides general instructions for installing and using CLAMS Apps.
App developers may provide additional information specific to their app,
hence it’s advised also to look up the app website (or code repository) to get the additional information.</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">¶</a></h2>
<p>Generally, a CLAMS App requires</p>
<ul class="simple">
<li><p>To run the app in a container (as an HTTP server), container management software such as <code class="docutils literal notranslate"><span class="pre">docker</span></code> or <code class="docutils literal notranslate"><span class="pre">podman</span></code>. This is the recommended way to use CLAMS Apps.</p>
<ul>
<li><p>(the CLAMS team is using <code class="docutils literal notranslate"><span class="pre">docker</span></code> for development and testing, hence the instructions are based on <code class="docutils literal notranslate"><span class="pre">docker</span></code> commands.)</p></li>
</ul>
</li>
<li><p>To run the app locally, Python3 with the <code class="docutils literal notranslate"><span class="pre">clams-python</span></code> module installed. Python 3.8 or higher is required.</p></li>
<li><p>To invoke and execute analysis, HTTP client utility (such as <code class="docutils literal notranslate"><span class="pre">curl</span></code>).</p></li>
</ul>
<p>For Python dependencies, usually CLAMS Apps come with <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> files that list up the Python library.
However, there could be other non-Python software/library that are required by the app.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>CLAMS Apps available on the CLAMS App Directory. Currently, all CLAMS Apps are open-source projects and are distributed as</p>
<ol class="arabic simple">
<li><p>source code downloadable from code repository</p></li>
<li><p>pre-built container image</p></li>
</ol>
<p>Please visit <a class="reference external" href="https://apps.clams.ai">the app-directory</a> to see which apps are available and where you can download them.</p>
<p>In most cases, you can “install” a CLAMS App by either</p>
<ol class="arabic simple">
<li><p>downloading pre-built container image directly (quick-and-easy way)</p></li>
<li><p>downloading source code from the app code repository and manually building a container image (more flexible way if you want to modify the app, or have to build for a specific HW)</p></li>
</ol>
<section id="download-prebuilt-image">
<h3>Download prebuilt image<a class="headerlink" href="#download-prebuilt-image" title="Link to this heading">¶</a></h3>
<p>This is the quickest (and recommended) way to get started with a CLAMS App.
CLAMS apps in the App Directory come with public prebuilt container images, available in a container registry.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>pull<span class="w"> </span>&lt;prebulit_image_name&gt;
</pre></div>
</div>
<p>The image name can be found on the App Directory entry of the app.</p>
</section>
<section id="build-an-image-from-source-code">
<h3>Build an image from source code<a class="headerlink" href="#build-an-image-from-source-code" title="Link to this heading">¶</a></h3>
<p>Alternatively, you can build a container image from the source code.
This is useful when you want to modify the app itself, or when you want to change the image building process to adjust to your hardware environment (e.g., specific compute engine), or additional software dependencies (e.g. <a class="reference external" href="https://clams.ai/mmif-python/latest/plugins.html">MMIF plugins</a>).
To download the source code, you can either use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> command or download a zip file from the source code repository.
The source code repository address can be found on the App Directory entry of the app.</p>
<p>From the locally downloaded project directory, run the following in your terminal to build an image from the included container specification file.</p>
<p>(Assuming you are using <code class="docutils literal notranslate"><span class="pre">docker</span></code> as your container manager)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>.<span class="w"> </span>-f<span class="w"> </span>Containerfile<span class="w"> </span>-t<span class="w"> </span>&lt;IMAGE_NAME_YOU_PICK&gt;
</pre></div>
</div>
</section>
</section>
<section id="running-clams-app">
<h2>Running CLAMS App<a class="headerlink" href="#running-clams-app" title="Link to this heading">¶</a></h2>
<p>CLAMS Apps are primarily designed to run as an HTTP server, but some apps written based on <code class="docutils literal notranslate"><span class="pre">clams-python</span></code> SDK additionally provide CLI equivalent to the HTTP requests.
In this session, we will first cover the usage of CLAMS apps as an HTTP server, and then cover the (optional) CLI.</p>
<section id="starting-the-http-server-as-a-container">
<h3>Starting the HTTP server as a container<a class="headerlink" href="#starting-the-http-server-as-a-container" title="Link to this heading">¶</a></h3>
<p>Once the image is built (by <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code>) or downloaded (by <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span></code>), to create and start a container, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-v<span class="w"> </span>/path/to/data/directory:/data<span class="w"> </span>-p<span class="w"> </span>&lt;PORT&gt;:5000<span class="w"> </span>&lt;IMAGE_NAME&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">/path/to/data/directory</span></code> is the local location of your media files or MMIF objects and <code class="docutils literal notranslate"><span class="pre">PORT</span></code> is the <em>host</em> port number you want your container to be listening to.
The HTTP inside the container will be listening to 5000 by default, so the second part of the <code class="docutils literal notranslate"><span class="pre">-p</span></code> argument is always <code class="docutils literal notranslate"><span class="pre">5000</span></code>.
Usually any number above 1024 is fine for the host port number, and you can use the same 5000 number for the host port number.</p>
<p>The mount point for the data directory inside the container can be any path, and we used <code class="docutils literal notranslate"><span class="pre">/data</span></code> just as an example.
However, it is very important to understand that the file location in the input MMIF file must be a valid and available path inside the container (see below for more details).</p>
<blockquote>
<div><p><strong>Note</strong>
If you are using a Mac, on recent versions of macOS, port 5000 is used by Airplay Receiver by default. So you may need to use a different port number, or turn off the Airplay Receiver in the System Preferences to release 5000.
For more information on <em>safe</em> port numbers, see <a class="reference external" href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml">IANA Port Number Registry</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">Wikipedia</a>.</p>
<p><strong>Note</strong>
Another note for users of recent Macs with Apple Silicon (M1, M2, etc) CPU: you might see the following error message when you run the container image.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">requested</span> <span class="n">image</span><span class="s1">&#39;s platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested</span>
</pre></div>
</div>
<p>This is because the image you are trying to run is built for Intel/AMD x64 CPUs. To force the container to run on an emulation layer, you can add <code class="docutils literal notranslate"><span class="pre">--platform</span> <span class="pre">linux/amd64</span></code> option to the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> command.</p>
</div></blockquote>
<p>Additionally, you can mount a directory to <code class="docutils literal notranslate"><span class="pre">/cache/</span></code> inside the container to persist the cache data between container runs.
This is particularly handy when the app you are using downloads a fairly large pretrained model file on the first run, and you want to keep it for the next run.</p>
<p>Unlike the data directory, the cache directory is not required to be mounted, but if you want to persist the cache data, you can mount a local directory to <code class="docutils literal notranslate"><span class="pre">/cache/</span></code> inside the container (fixed path).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-v<span class="w"> </span>/path/to/data/directory:/data<span class="w"> </span>-v<span class="w"> </span>/path/to/cache/directory:/cache<span class="w"> </span>-p<span class="w"> </span>&lt;port&gt;:5000<span class="w"> </span>&lt;image_name&gt;
</pre></div>
</div>
<blockquote>
<div><p><strong>Note</strong>
One might be tempted bind-mount their entire local cache directory (usually <code class="docutils literal notranslate"><span class="pre">~/.cache</span></code> in Linux systems) to re-use locally downloaded model files, across different apps.
However, doing so will expose all the cached data, not just model files, to the container.
This can include sensitive information such as browser cache, authentication tokens, etc, hence will pose a great security risk.
It is recommended to create a separate directory to use as a cache directory for CLAMS containers.</p>
</div></blockquote>
</section>
</section>
<section id="invoking-the-app-server">
<h2>Invoking the app server<a class="headerlink" href="#invoking-the-app-server" title="Link to this heading">¶</a></h2>
<section id="to-get-app-metadata">
<h3>To get app metadata<a class="headerlink" href="#to-get-app-metadata" title="Link to this heading">¶</a></h3>
<p>Once the app is running as an HTTP server, visit the server address (<a class="reference external" href="http://localhost:5000">localhost:5000</a>, or the remote host name if running on a remote computer) to get the app metadata.
App metadata is also available at the App Directory entry of the app if the app is published on the App Directory.
App metadata contains important information about the app that we will use in the following sections.</p>
</section>
<section id="to-process-input-media">
<h3>To process input media<a class="headerlink" href="#to-process-input-media" title="Link to this heading">¶</a></h3>
<p>To actually run the app and process input media through computational analysis, simply send a POST request to the app with a MMIF input as the request body.</p>
<p>MMIF input files can be obtained from outputs of other CLAMS apps, or you can create an <em>empty</em> MMIF only with source media locations using <code class="docutils literal notranslate"><span class="pre">clams</span> <span class="pre">source</span></code> command. See the help message for a more detailed instructions.
(Make sure you have installed <cite>``clams-python`</cite> package &lt;<a class="reference external" href="https://pypi.org/project/clams-python/">https://pypi.org/project/clams-python/</a>&gt;`_ version from PyPI.)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>clams-python
$<span class="w"> </span>clams<span class="w"> </span><span class="nb">source</span><span class="w"> </span>--help
</pre></div>
</div>
<p>For example; by running</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>clams<span class="w"> </span><span class="nb">source</span><span class="w"> </span>audio:/data/audio/some-audio-file.mp3
</pre></div>
</div>
<p>You will get</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;mmif&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://mmif.clams.ai/X.Y.Z&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;documents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://mmif.clams.ai/vocabulary/AudioDocument/v1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;audio&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file:///data/audio/some-audio-file.mp3&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;views&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If an app requires just <code class="docutils literal notranslate"><span class="pre">Document</span></code> inputs (see <code class="docutils literal notranslate"><span class="pre">input</span></code> section of the app metadata), an empty MMIF with required media file locations will suffice.
The location has to be a URL or an absolute path, and it is important to ensure that it exists.
Especially when running the app in a container, and the document location is specified as a file system path, the file must be available inside the container.
In the above, we bind-mounted <code class="docutils literal notranslate"><span class="pre">/path/to/data/directory</span></code> (host) to <code class="docutils literal notranslate"><span class="pre">/data</span></code> (container).
That is why we used <code class="docutils literal notranslate"><span class="pre">/data/audio/some-audio-file.mp3</span></code> as the location when generating this MMIF input.
So in this example, the file <code class="docutils literal notranslate"><span class="pre">/path/to/data/directory/audio/some-audio-file.mp3</span></code> must exist on the host side, so that inside the container, it can be accessed as <code class="docutils literal notranslate"><span class="pre">/data/audio/some-audio-file.mp3</span></code>.</p>
<p>Some apps only works with input MMIF that already contains some annotations of specific types. To run such apps, you need to run different apps in a sequence.</p>
<p>(TODO: added CLAMS workflow documentation link here.)</p>
<p>When an input MMIF is ready, you can send it to the app server.
Here’s an example of how to use the <code class="docutils literal notranslate"><span class="pre">curl</span></code> command, and store the response in a file <code class="docutils literal notranslate"><span class="pre">output.mmif</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>clams<span class="w"> </span><span class="nb">source</span><span class="w"> </span>audio:/data/audio/some-audio-file.mp3<span class="w"> </span>&gt;<span class="w"> </span>input.mmif
$<span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Accept: application/json&quot;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-d@input.mmif<span class="w"> </span>-s<span class="w"> </span>http://localhost:5000<span class="w"> </span>&gt;<span class="w"> </span>output.mmif

<span class="c1"># or using a bash pipeline</span>
$<span class="w"> </span>clams<span class="w"> </span><span class="nb">source</span><span class="w"> </span>audio:/data/audio/some-audio-file.mp3<span class="w"> </span><span class="p">|</span><span class="w"> </span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-d@-<span class="w"> </span>-s<span class="w"> </span>http://localhost:5000<span class="w"> </span>&gt;<span class="w"> </span>output.mmif
</pre></div>
</div>
<p>Windows PowerShell users may encounter an <code class="docutils literal notranslate"><span class="pre">Invoke-WebRequest</span></code> exception when attempting to send an input file with <code class="docutils literal notranslate"><span class="pre">curl</span></code>.
This can be resolved for the duration of the current session by using the command <code class="docutils literal notranslate"><span class="pre">remove-item</span> <span class="pre">alias:curl</span></code> before proceeding to use <code class="docutils literal notranslate"><span class="pre">curl</span></code>.</p>
</section>
<section id="configuring-the-app">
<h3>Configuring the app<a class="headerlink" href="#configuring-the-app" title="Link to this heading">¶</a></h3>
<p>Running as an HTTP server, CLAMS Apps are stateless, but can be configured for each HTTP request by providing configuration parameters as <a class="reference external" href="https://en.wikipedia.org/wiki/Query_string">query string</a>.</p>
<p>For example, appending <code class="docutils literal notranslate"><span class="pre">?pretty=True</span></code> to the URL will result in a JSON output with indentation for better readability.</p>
<blockquote>
<div><p><strong>Note</strong>
When you’re using <code class="docutils literal notranslate"><span class="pre">curl</span></code> from a shell session, you need to escape the <code class="docutils literal notranslate"><span class="pre">?</span></code> or <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> characters with <code class="docutils literal notranslate"><span class="pre">\</span></code> to prevent the shell from interpreting it as a special character.</p>
</div></blockquote>
<p>Different apps have different configurability. For configuration parameters of an app, please refer to <code class="docutils literal notranslate"><span class="pre">parameter</span></code> section of the app metadata. In addition to app-specific parameters, all apps support universal parameters (e.g., <code class="docutils literal notranslate"><span class="pre">pretty</span></code> for formatted output). Check the app metadata for the complete and up-to-date list.</p>
</section>
</section>
<section id="using-clams-app-as-a-cli-program">
<h2>Using CLAMS App as a CLI program<a class="headerlink" href="#using-clams-app-as-a-cli-program" title="Link to this heading">¶</a></h2>
<p>First and foremost, not all CLAMS Apps support command line interface (CLI).
At the minimum, a CLAMS app is required to support HTTP interfaces described in the previous section.
If any of the following instructions do not work for an app, it is likely that the app does not support CLI.</p>
<section id="python-entry-points">
<h3>Python entry points<a class="headerlink" href="#python-entry-points" title="Link to this heading">¶</a></h3>
<p>Apps written on <code class="docutils literal notranslate"><span class="pre">clams-python</span></code> SDK have three python entry points by default: <code class="docutils literal notranslate"><span class="pre">app.py</span></code>, <code class="docutils literal notranslate"><span class="pre">metadata.py</span></code>, and <code class="docutils literal notranslate"><span class="pre">cli.py</span></code>.</p>
</section>
<section id="app-py-running-app-as-a-local-http-server">
<h3><code class="docutils literal notranslate"><span class="pre">app.py</span></code>: Running app as a local HTTP server<a class="headerlink" href="#app-py-running-app-as-a-local-http-server" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">app.py</span></code> is the main entry point for running the app as an HTTP server.
To run the app as a local HTTP server without containerization, you can run the following command from the source code directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>app.py
</pre></div>
</div>
<ul class="simple">
<li><p>By default, the app will be listening to port 5000, but you can change the port number by passing <code class="docutils literal notranslate"><span class="pre">--port</span> <span class="pre">&lt;NUMBER&gt;</span></code> option.</p></li>
<li><p>Be default, the app will be running in <em>debugging</em> mode, but you can change it to <em>production</em> mode by passing <code class="docutils literal notranslate"><span class="pre">--production</span></code> option to support larger traffic volume.</p></li>
<li><p>As you might have noticed, the default <code class="docutils literal notranslate"><span class="pre">CMD</span></code> in the prebuilt containers is <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">app.py</span> <span class="pre">--production</span> <span class="pre">--port</span> <span class="pre">5000</span></code>.</p></li>
</ul>
<section id="environment-variables-for-production-mode">
<h4>Environment variables for production mode<a class="headerlink" href="#environment-variables-for-production-mode" title="Link to this heading">¶</a></h4>
<p>When running in production mode, the following environment variables can be used to configure the app server:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CLAMS_GUNICORN_WORKERS</span></code></p></td>
<td><p>Number of gunicorn worker processes</p></td>
<td><p>Auto-calculated based on CPU cores and GPU memory</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CLAMS_LOGLEVEL</span></code></p></td>
<td><p>Logging verbosity level (<code class="docutils literal notranslate"><span class="pre">debug</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">warning</span></code>, <code class="docutils literal notranslate"><span class="pre">error</span></code>)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">warning</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the number of workers is calculated as <code class="docutils literal notranslate"><span class="pre">(CPU</span> <span class="pre">cores</span> <span class="pre">×</span> <span class="pre">2)</span> <span class="pre">+</span> <span class="pre">1</span></code>. For GPU-based apps, see <a class="reference external" href="gpu-apps.md">GPU Memory Management</a> for details on automatic worker scaling and VRAM management.</p>
</section>
</section>
<section id="metadata-py-getting-app-metadata">
<h3><code class="docutils literal notranslate"><span class="pre">metadata.py</span></code>: Getting app metadata<a class="headerlink" href="#metadata-py-getting-app-metadata" title="Link to this heading">¶</a></h3>
<p>Running <code class="docutils literal notranslate"><span class="pre">metadata.py</span></code> will print out the app metadata in JSON format.</p>
</section>
<section id="cli-py-running-as-a-cli-program">
<h3><code class="docutils literal notranslate"><span class="pre">cli.py</span></code>: Running as a CLI program<a class="headerlink" href="#cli-py-running-as-a-cli-program" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">cli.py</span></code> is completely optional for app developers, and unlike the other two above that are guaranteed to be available, <code class="docutils literal notranslate"><span class="pre">cli.py</span></code> may not be available for some apps.
When running an app as a HTTP app, the input MMIF must be passed as POST request’s body, and the output MMIF will be returned as the response body.
To mimic this behavior in a CLI, <code class="docutils literal notranslate"><span class="pre">cli.py</span></code> has two positional arguments;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>cli.py<span class="w"> </span>&lt;INPUT_MMIF&gt;<span class="w"> </span>&lt;OUTPUT_MMIF&gt;<span class="w">  </span><span class="c1"># will read INPUT_MMIF file, process it, and write the result to OUTPUT_MMIF file</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;INPUT_MMIF&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;OUTPUT_MMIF&gt;</span></code> are file paths to the input and output MMIF files, respectively.
Following the common unix CLI practice, you can use <code class="docutils literal notranslate"><span class="pre">-</span></code> to represent STDIN and/or STDOUT</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># will read from STDIN, process it, and write the result to STDOUT</span>
$<span class="w"> </span>python<span class="w"> </span>cli.py<span class="w"> </span>-<span class="w"> </span>-

<span class="c1"># or equivalently</span>
$<span class="w"> </span>python<span class="w"> </span>cli.py

<span class="c1"># read from a file, write to STDOUT</span>
$<span class="w"> </span>python<span class="w"> </span>cli.py<span class="w"> </span>input.mmif<span class="w"> </span>-

<span class="c1"># or equivalently</span>
$<span class="w"> </span>python<span class="w"> </span>cli.py<span class="w"> </span>input.mmif

<span class="c1"># read from STDIN, write to a file</span>
$<span class="w"> </span>cat<span class="w"> </span>input.mmif<span class="w"> </span><span class="p">|</span><span class="w"> </span>python<span class="w"> </span>cli.py<span class="w"> </span>-<span class="w"> </span>output.mmif
</pre></div>
</div>
<p>As with the HTTP server, you can pass configuration parameters to the CLI program.
All parameter names are the same as the HTTP query parameters, but you need to use <code class="docutils literal notranslate"><span class="pre">--</span></code> prefix to indicate that it is a parameter.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>cli.py<span class="w"> </span>--pretty<span class="w"> </span>True<span class="w"> </span>input.mmif<span class="w"> </span>output.mmif
</pre></div>
</div>
<p>Finally, when running the app as a container, you can override the default <code class="docutils literal notranslate"><span class="pre">CMD</span></code> (<code class="docutils literal notranslate"><span class="pre">app.py</span></code>) by passing a <code class="docutils literal notranslate"><span class="pre">cli.py</span></code> command to the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>input.mmif<span class="w"> </span><span class="p">|</span><span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-i<span class="w"> </span>-v<span class="w"> </span>/path/to/data/directory:/data<span class="w"> </span>&lt;IMAGE_NAME&gt;<span class="w"> </span>python<span class="w"> </span>cli.py
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">input.mmif</span></code> is in the host machine, and the container is reading it from the STDIN.
You can also pass the input MMIF file as a volume to the container.
However, when you do so, you need to make sure that the file path in the MMIF is correctly set to the file path in the container.</p>
<blockquote>
<div><p><strong>Note</strong>
Here, make sure to pass <cite>`</cite>-i`` option to the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> &lt;<a class="reference external" href="https://docs.docker.com/reference/cli/docker/container/run/#interactive">https://docs.docker.com/reference/cli/docker/container/run/#interactive</a>&gt;`_ command to make host’s STDIN work properly with the container.</p>
</div></blockquote>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Brandeis LLC
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Using CLAMS App</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#download-prebuilt-image">Download prebuilt image</a></li>
<li><a class="reference internal" href="#build-an-image-from-source-code">Build an image from source code</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-clams-app">Running CLAMS App</a><ul>
<li><a class="reference internal" href="#starting-the-http-server-as-a-container">Starting the HTTP server as a container</a></li>
</ul>
</li>
<li><a class="reference internal" href="#invoking-the-app-server">Invoking the app server</a><ul>
<li><a class="reference internal" href="#to-get-app-metadata">To get app metadata</a></li>
<li><a class="reference internal" href="#to-process-input-media">To process input media</a></li>
<li><a class="reference internal" href="#configuring-the-app">Configuring the app</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-clams-app-as-a-cli-program">Using CLAMS App as a CLI program</a><ul>
<li><a class="reference internal" href="#python-entry-points">Python entry points</a></li>
<li><a class="reference internal" href="#app-py-running-app-as-a-local-http-server"><code class="docutils literal notranslate"><span class="pre">app.py</span></code>: Running app as a local HTTP server</a><ul>
<li><a class="reference internal" href="#environment-variables-for-production-mode">Environment variables for production mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#metadata-py-getting-app-metadata"><code class="docutils literal notranslate"><span class="pre">metadata.py</span></code>: Getting app metadata</a></li>
<li><a class="reference internal" href="#cli-py-running-as-a-cli-program"><code class="docutils literal notranslate"><span class="pre">cli.py</span></code>: Running as a CLI program</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=8a448e45"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>